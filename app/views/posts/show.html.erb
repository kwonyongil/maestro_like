<div class="whole">
    <div class="container main">
        <a href="/musics/playlist" class="hovernot"><h1 class="main_logo">Maestro</h1></a>
        <div class="row">
            <div class="col-sm-10"></div>
            <div class="col-sm-2 infos">
                <%= link_to 'Edit', edit_post_path(@post), class: "show-nav" %> |
                <%= link_to 'list', posts_path, class: "show-nav" %>
            </div>
        </div>
        <div class="line"></div>
        <div class="row">
            <div class="col-sm-6">
                <div class="thumbnail-wrapper"> 
                <div class="thumbnail">
                 <div class="centered">
                    <% if @post.playlist.image.present? %>
                        <img src="<%= @post.playlist.image %>" class="playlist-image"></img>
                    <% else %>
                        <img src="/default_imgs/<%=@post.playlist.image2%>" class="playlist-image">
                    <% end %>
                    
     </div>
    </div>
    </div>      
            </div>
            <div class="col-sm-6 raw_music">
                <% @volume = Array.new %>
                <% @musics = Music.where(:playlist_id => @post.playlist_id) %>
                <% @musics = @musics.where(:onoff => true) %>
                <% @musics.each_with_index do |u, i| %>
                <% @volume[i] = u.volume %>
                <div class="music_item">
                    <span><%= u.name%></span>
                    <div class="player_show">
                        <audio id="audio<%=i%>"class="audio__playlist" src="/<%=u.name %>.mp3" loop autoplay></audio>
                        <div id="volume_<%=i%>" class="volume_show"></div>   
                    </div>
                </div>
                <% end %>
            </div>
        </div>    
        <div class="row restof">
            <div class="col-sm-6">
                <p># <%= @post.title %></p>
                <p> <%= @post.content %></p>
                
            </div>
            <div class="col-sm-6">
                <div class="row">
                    <div class="col-sm-12">
                        <% if current_user.is_like?(@post) %>
                        <p class="likes">
                            <%= link_to "♥", post_like_path(@post), method: "post", :class => "likebutton_yes"%>
                             <% else %>
                            <%= link_to "♡", post_like_path(@post), method: "post", :class => "likebutton_no"%>
                            <% end %>
                            <%= @post.likes.size %> likes
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-10">
                        <form action="/posts/<%=@post.id%>" method="post" >
                        <div class="form-group">
                        <input type="hidden" value="<%=current_user.id%>" name="user_id"></input>
                        <input type="hidden" value="<%=@post.id%>" name="post_id"></input>
                        <textarea class="form-control comment_blank" rows="1" name="comment" id="comment_content"></textarea>
                       </div>
                    </div>
                    <div class="col-sm-2">
                       <button type="submit" class="comment-button">post</button>
                      </form>
                    </div>
                </div>
        <div class="row">
            <div class="col-sm-12 " id="comments">
               
                <% @comments = @post.comments.order('created_at DESC').page(params[:page]).per(2) %>
                <% @comments.each do |comment| %>
               
                <span><%= comment.content %></span>
                   <%= link_to "x", "/posts/#{@post.id}/comments/#{comment.id}",
                        method: :delete,
                        remote: true,
                        data: {confirm: "정말로 삭제하시겠습니까?"} %>
                 <span class="writer"> 작성자 : <%= comment.user.name %></span>
                  <hr>
                   
                <% end %>
                <div class="paginationall">
              <%= paginate @comments, window:2, outer_window:0 %>
              </div>
            </div> 
        </div>
        </div>
        </div>
        <div class="row add">
            <form action="posts/show" method="post">
                    <input type="hidden" name="playlist_id" value="<%=@post.playlist_id%>">
                    <%if current_user.playlists.size != 4 %>
                    <input type="submit" value="add to my list" class="submit_button">
                    <%else%>
                    <%end%>
            </form>
        </div>
    </div>
</div>

<script>

//1

$(function () {
    var $audi = new Array();
    $audi = document.getElementsByClassName("audio__playlist");
    
    
    $.each($audi,function(i){
        var $vol = $("#volume_" + i);
        var AUDIO = $audi[i];
        var volvalue = <%= @volume %>;
        
        AUDIO.volume = volvalue[i];
    
        $vol.slider({
            min:0,
            max:100,
            range:"min",
            disabled: true,
            value: AUDIO.volume * 100,
            slide: function (ev, ui) {
  
                AUDIO.volume = ui.value / 100;
            }
        })
    });
});

</script>









<style>
.container{
    
    
}


.likebutton_yes{
    color:;
}
.likebutton_no{
    color:darkred;
}
.show-nav{
    color:lightgray;
    margin-right:20px;
    margin-left:20px;
    
    &:{
        text-decoration:none;
    }
}
.col-sm-2{
    padding-left:0 !important;
}
.whole{
    height:150vh;
    background-color:black;
}

.main{
    padding-top: 0px;
    }
    
.main_logo{
    padding:30px;
    color:lightgray;
    text-align: center;
    }


.thumbnail-wrappper { width: 25%; } 
.thumbnail { position: relative; padding-top: 75%; overflow: hidden;background-color:black; border :0px; } 
.thumbnail .centered {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0; -webkit-transform: translate(50%,50%);
    -ms-transform: translate(50%,50%); transform: translate(50%,50%); }
.thumbnail .centered img 
{ position: absolute; top: 0; left: 0; max-width: 100%; height: auto; -webkit-transform: translate(-50%,-50%); -ms-transform: translate(-50%,-50%); transform: translate(-50%,-50%); }



span,p{
    color:lightgray;
}
.restof{
    margin-top:40px;
}
.comment_blank{
    background-color:transparent;
}
.line{
        width:100%;
        height:2px;
        background-color: gray;
        margin-bottom: 20px;
    }
.infos{
    float: left;
}

.raw_music {
    height:90%;
   overflow:auto;
}

.writer{
    float:right;
}
.add form{
    width:100px;
    margin:0 auto;
}
.submit_button{
    background:none;
    border: 2px solid white;
    color:white;
    border-radius:10px;
    margin-top: 50px;
    width:180px;
    height: 50px;
    padding: 15px 30px 15px 30px;

}

.submit_button:hover{
    cursor:pointer;
    border: 2px solid gray;
    color: gray ; 
    
}    

.comment-button{
    padding: 5px 25px 5px 25px;
   background-color: transparent;
   border-radius: 3px;
  border: 1px solid lightgray;
  color:lightgray;
}

.paginationall{
    text-align:center;
}

.pagination {
    display: inline-block;
}

.pagination a {
    color: white;
    float: center;
    padding: 8px 16px;
    text-decoration: none;
}
.page.current{
    color: white;
    float: center;
    padding: 8px 16px;
    text-decoration: none;
}

.pagination a.active {
    background-color: #4CAF50;
    color: white;
}

.pagination a:hover:not(.active) {background-color:#3366BB; }

</style>



  
